# 기본형 데이터와 참조형 데이터
## 불변값
변수와 상수를 구분하는 성질은 `변경 가능성`. 바꿀 수 있으면 변수, 바꿀 수 없으면 상수. 그러나 `불변값`과 `상수`는 다른 개념
`변수 영역 메모리` 변수와 상수를 구분 짓는 변경 가능성의 대상
`데이터 영역 메모리` 불변성 여부를 구분할 때의 변경 가능성의 대상
- 기본형 데이터(숫자, 문자열, boolean, null, undefined, Symbol)는 불변값
- 변경은 새로 만드는 동작을 통해서만 이루어짐. 변경 자체가 성립되지 않음 -> 불변값의 성질
## 가변값
참조형 데이터의 기본적인 성질은 가변값인 경우가 많지만, 설정에 따라 변경이 불가능한 경우도 아예 불변값으로 활용하는 방안도 있음
- 참조형 데이터의 할당 과정
```javascript
var obj1 = {
    a: 1,
    b: 'bbb'
};
```
    - 컴퓨터는 우선 변수 영역의 빈 공간을 확보하고 그 주소의 이름을 `obj1`로 지정함
    - 여러 개의 프로퍼티로 이루어진 데이터 그룹이라 데이터 저장공간에 별도의 변수 영역을 마련하고, 그 영역의 주소를 데이터 공간에 저장함
    - 객체 변수 영역에는 각각 a와 b라는 프로퍼티 이름을 지정함
    - 데이터 영역에서 숫자 1(a)을 검색하고 결과가 없으므로 임의 공간에 저장하고, 이 주소를 변수 영역 데이터에 저장함. 변수 b도 마찬가지
-> 기본형 데이터와의 차이는 `객체의 변수(프로퍼티) 영역`이 별도로 존재한다는 점. 이는 객체가 별도로 할애한 영역이 변수 영역일 뿐 `데이터 영역`은 기존의 메모리 공간을 그대로 활용하고 있다는 것.
   결론적으로, 데이터 영역에 저장된 값은 모두 불변값이지만 변수 영역에는 얼마든지 다른 값을 대입할 수 있다는 것. 그래서 보통 참조형 데이터를 가변값이라고 칭하는 것.
- 중첩된 참조형 데이터(객체)의 프로퍼티 할당
```javascript
var obj = {
    x: 3,
    arr: [3, 4, 5]
};
```
- 변수 영역의 빈 공간(@1002) 확보 후, 그 주소 이름 obj로 지정
- 데이터 저장공간(@5002)에는 각 변수(프로퍼티)들을 저장하기 위해 별도의 변수 영역(@7103 ~ ?)을 마련함. 그리고 그곳에는 @7103의 주소를 지정해줌. why? 데이터 자체가 여러 개의 변수와 값들을 모아둔 그룹(객체)이기때문
- 변수 영역에 @7103에는 이름 x, @7104에는 이름 arr로 지정
- 데이터 영역에서 숫자 3(x)을 검색 후 없으면 임의로 @5002에 저장하고 이 주소를 @7103에 저장함
- @7104에 저장할 값은 배열로 역시 데이터 그룹이기 때문에 또 별도의 변수 영역을 마련하고 그 주소 정보를 @5003에 저장하고 @5003의 주소를 @7104에 저장
- 배열의 요소가 총 3개이므로 3개의 변수 공간을 확보해 각각 인덱스 부여함(@8104 @8105 @8106)
- 데이터 영역에서 3을 검색해 해당하는 주소(@5002)를 각 인덱스에 저장함
- 4와 5의 경우 이미 저장되어 있는 것이 없으므로 데이터 영역에서 새로 할당해 각각 @5004과 @5005에 저장하고 그 주소를 각 인덱스에 저장함
- 만약 이 상태에서 재할당 명령을 내리면 어떻게 될까?
```javascript
obj.arr = 'str';
```
새로운 데이터 영역에 str을 저장하고 그 주소를 기존 변수영역(@7104)에 저장함. 이 경우, 기존 3이 저장되어있던 @5003은 더이상 자신을 참조하는 변수가 하나도 없게됨.\
어떤 데이터에 대한 자신의 주소를 참조하는 변수의 개수인 `참조 카운트`가 0이 되면 해당 메모리 주소는 `가비지 컬렉터`의 수거 대상이 됨. `가비지 컬렉터`는 런타임 환경에 따라 특정 시점이나 메모리 사용량이 포화상태에 임박하면 자동으로 수거대상들을 수거해 메모리를 확보함
## 변수 복사 비교
기본형과 참조형 간 차이를 알아보자.
- 변수를 복사하는 과정에 있어서는 기본형과 참조형 데이터 모두 같은 주소를 바라보는 점에서 동일함.
- 데이터 할당 과정에서 차이가 있고 이는 복사 이후 동작에 있어서 차이을 가져옴.
- 기본형은 주솟값을 복사하는 과정이 한 번, 참조형은 한 단계 더 거치게 됨


